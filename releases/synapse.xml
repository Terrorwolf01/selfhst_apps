<?xml version='1.0' encoding='UTF-8'?>
<feed xmlns="http://www.w3.org/2005/Atom" xml:lang="en">
  <id>https://selfh.st/apps</id>
  <title>Synapse Releases</title>
  <updated>2024-08-09T08:31:36.488442-04:00</updated>
  <author>
    <name>selfh.st</name>
    <email>contact@selfh.st</email>
  </author>
  <link href="https://selfh.st/apps" rel="alternate"/>
  <generator uri="https://lkiesow.github.io/python-feedgen" version="0.9.0">python-feedgen</generator>
  <subtitle>Self-hosted software releases generated by selfh.st</subtitle>
  <entry>
    <id>https://github.com/element-hq/synapse/releases/tag/v1.109.0</id>
    <title>New release for Synapse: v1.109.0</title>
    <updated>2024-06-18T06:31:02-04:00</updated>
    <author>
      <name>element-hq/synapse</name>
    </author>
    <content>&lt;h1&gt;Synapse 1.109.0 (2024-06-18)&lt;/h1&gt;
&lt;h3&gt;Internal Changes&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Fix the building of binary wheels for macOS by switching to macOS 12 CI runners. (&lt;a href="https://github.com/element-hq/synapse/issues/17319"&gt;#17319&lt;/a&gt;)&lt;/li&gt;
&lt;/ul&gt;
&lt;h1&gt;Synapse 1.109.0rc3 (2024-06-17)&lt;/h1&gt;
&lt;h3&gt;Bugfixes&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;When rolling back to a previous Synapse version and then forwards again to this release, don't require server operators to manually run SQL. (&lt;a href="https://github.com/element-hq/synapse/issues/17305"&gt;#17305&lt;/a&gt;, &lt;a href="https://github.com/element-hq/synapse/issues/17309"&gt;#17309&lt;/a&gt;)&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;Internal Changes&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Use the release branch for sytest in release-branch PRs. (&lt;a href="https://github.com/element-hq/synapse/issues/17306"&gt;#17306&lt;/a&gt;)&lt;/li&gt;
&lt;/ul&gt;
&lt;h1&gt;Synapse 1.109.0rc2 (2024-06-11)&lt;/h1&gt;
&lt;h3&gt;Bugfixes&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Fix bug where one-time-keys were not always included in &lt;code&gt;/sync&lt;/code&gt; response when using workers. Introduced in v1.109.0rc1. (&lt;a href="https://github.com/element-hq/synapse/issues/17275"&gt;#17275&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;Fix bug where &lt;code&gt;/sync&lt;/code&gt; could get stuck due to edge case in device lists handling. Introduced in v1.109.0rc1. (&lt;a href="https://github.com/element-hq/synapse/issues/17292"&gt;#17292&lt;/a&gt;)&lt;/li&gt;
&lt;/ul&gt;
&lt;h1&gt;Synapse 1.109.0rc1 (2024-06-04)&lt;/h1&gt;
&lt;h3&gt;Features&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Add the ability to auto-accept invites on the behalf of users. See the &lt;a href="https://element-hq.github.io/synapse/latest/usage/configuration/config_documentation.html#auto-accept-invites"&gt;&lt;code&gt;auto_accept_invites&lt;/code&gt;&lt;/a&gt; config option for details. (&lt;a href="https://github.com/element-hq/synapse/issues/17147"&gt;#17147&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;Add experimental &lt;a href="https://github.com/matrix-org/matrix-spec-proposals/pull/3575"&gt;MSC3575&lt;/a&gt; Sliding Sync &lt;code&gt;/sync/e2ee&lt;/code&gt; endpoint for to-device messages and device encryption info. (&lt;a href="https://github.com/element-hq/synapse/issues/17167"&gt;#17167&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;Support &lt;a href="https://github.com/matrix-org/matrix-spec-proposals/issues/3916"&gt;MSC3916&lt;/a&gt; by adding unstable media endpoints to &lt;code&gt;/_matrix/client&lt;/code&gt;. (&lt;a href="https://github.com/element-hq/synapse/issues/17213"&gt;#17213&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;Add logging to tasks managed by the task scheduler, showing CPU and database usage. (&lt;a href="https://github.com/element-hq/synapse/issues/17219"&gt;#17219&lt;/a&gt;)&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;Bugfixes&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Fix deduplicating of membership events to not create unused state groups. (&lt;a href="https://github.com/element-hq/synapse/issues/17164"&gt;#17164&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;Fix bug where duplicate events could be sent down sync when using workers that are overloaded. (&lt;a href="https://github.com/element-hq/synapse/issues/17215"&gt;#17215&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;Ignore attempts to send to-device messages to bad users, to avoid log spam when we try to connect to the bad server. (&lt;a href="https://github.com/element-hq/synapse/issues/17240"&gt;#17240&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;Fix handling of duplicate concurrent uploading of device one-time-keys. (&lt;a href="https://github.com/element-hq/synapse/issues/17241"&gt;#17241&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;Fix reporting of default tags to Sentry, such as worker name. Broke in v1.108.0. (&lt;a href="https://github.com/element-hq/synapse/issues/17251"&gt;#17251&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;Fix bug where typing updates would not be sent when using workers after a restart. (&lt;a href="https://github.com/element-hq/synapse/issues/17252"&gt;#17252&lt;/a&gt;)&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;Improved Documentation&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Update the LemonLDAP documentation to say that claims should be explicitly included in the returned &lt;code&gt;id_token&lt;/code&gt;, as Synapse won't request them. (&lt;a href="https://github.com/element-hq/synapse/issues/17204"&gt;#17204&lt;/a&gt;)&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;Internal Changes&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Improve DB usage when fetching related events. (&lt;a href="https://github.com/element-hq/synapse/issues/17083"&gt;#17083&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;Log exceptions when failing to auto-join new user according to the &lt;code&gt;auto_join_rooms&lt;/code&gt; option. (&lt;a href="https://github.com/element-hq/synapse/issues/17176"&gt;#17176&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;Reduce work of calculating outbound device lists updates. (&lt;a href="https://github.com/element-hq/synapse/issues/17211"&gt;#17211&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;Improve performance of calculating device lists changes in &lt;code&gt;/sync&lt;/code&gt;. (&lt;a href="https://github.com/element-hq/synapse/issues/17216"&gt;#17216&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;Move towards using &lt;code&gt;MultiWriterIdGenerator&lt;/code&gt; everywhere. (&lt;a href="https://github.com/element-hq/synapse/issues/17226"&gt;#17226&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;Replaces all usages of &lt;code&gt;StreamIdGenerator&lt;/code&gt; with &lt;code&gt;MultiWriterIdGenerator&lt;/code&gt;. (&lt;a href="https://github.com/element-hq/synapse/issues/17229"&gt;#17229&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;Change the &lt;code&gt;allow_unsafe_locale&lt;/code&gt; config option to also apply when setting up new databases. (&lt;a href="https://github.com/element-hq/synapse/issues/17238"&gt;#17238&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;Fix errors in logs about closing incorrect logging contexts when media gets rejected by a module. (&lt;a href="https://github.com/element-hq/synapse/issues/17239"&gt;#17239&lt;/a&gt;, &lt;a href="https://github.com/element-hq/synapse/issues/17246"&gt;#17246&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;Clean out invalid destinations from &lt;code&gt;device_federation_outbox&lt;/code&gt; table. (&lt;a href="https://github.com/element-hq/synapse/issues/17242"&gt;#17242&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;Stop logging errors when receiving invalid User IDs in key querys requests. (&lt;a href="https://github.com/element-hq/synapse/issues/17250"&gt;#17250&lt;/a&gt;)&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;Updates to locked dependencies&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Bump anyhow from 1.0.83 to 1.0.86. (&lt;a href="https://github.com/element-hq/synapse/issues/17220"&gt;#17220&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;Bump bcrypt from 4.1.2 to 4.1.3. (&lt;a href="https://github.com/element-hq/synapse/issues/17224"&gt;#17224&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;Bump lxml from 5.2.1 to 5.2.2. (&lt;a href="https://github.com/element-hq/synapse/issues/17261"&gt;#17261&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;Bump mypy-zope from 1.0.3 to 1.0.4. (&lt;a href="https://github.com/element-hq/synapse/issues/17262"&gt;#17262&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;Bump phonenumbers from 8.13.35 to 8.13.37. (&lt;a href="https://github.com/element-hq/synapse/issues/17235"&gt;#17235&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;Bump prometheus-client from 0.19.0 to 0.20.0. (&lt;a href="https://github.com/element-hq/synapse/issues/17233"&gt;#17233&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;Bump pyasn1 from 0.5.1 to 0.6.0. (&lt;a href="https://github.com/element-hq/synapse/issues/17223"&gt;#17223&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;Bump pyicu from 2.13 to 2.13.1. (&lt;a href="https://github.com/element-hq/synapse/issues/17236"&gt;#17236&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;Bump pyopenssl from 24.0.0 to 24.1.0. (&lt;a href="https://github.com/element-hq/synapse/issues/17234"&gt;#17234&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;Bump serde from 1.0.201 to 1.0.202. (&lt;a href="https://github.com/element-hq/synapse/issues/17221"&gt;#17221&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;Bump serde from 1.0.202 to 1.0.203. (&lt;a href="https://github.com/element-hq/synapse/issues/17232"&gt;#17232&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;Bump twine from 5.0.0 to 5.1.0. (&lt;a href="https://github.com/element-hq/synapse/issues/17225"&gt;#17225&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;Bump types-psycopg2 from 2.9.21.20240311 to 2.9.21.20240417. (&lt;a href="https://github.com/element-hq/synapse/issues/17222"&gt;#17222&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;Bump types-pyopenssl from 24.0.0.20240311 to 24.1.0.20240425. (&lt;a href="https://github.com/element-hq/synapse/issues/17260"&gt;#17260&lt;/a&gt;)&lt;/li&gt;
&lt;/ul&gt;</content>
    <link href="https://github.com/element-hq/synapse/releases/tag/v1.109.0" rel="alternate"/>
  </entry>
  <entry>
    <id>https://github.com/element-hq/synapse/releases/tag/v1.110.0</id>
    <title>New release for Synapse: v1.110.0</title>
    <updated>2024-07-03T12:14:16-04:00</updated>
    <author>
      <name>element-hq/synapse</name>
    </author>
    <content>&lt;h1&gt;Synapse 1.110.0 (2024-07-03)&lt;/h1&gt;
&lt;p&gt;No significant changes since 1.110.0rc3.&lt;/p&gt;
&lt;h1&gt;Synapse 1.110.0rc3 (2024-07-02)&lt;/h1&gt;
&lt;h3&gt;Bugfixes&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Fix bug where &lt;code&gt;/sync&lt;/code&gt; requests could get blocked indefinitely after an upgrade from Synapse versions before v1.109.0. (&lt;a href="https://github.com/element-hq/synapse/issues/17386"&gt;#17386&lt;/a&gt;, &lt;a href="https://github.com/element-hq/synapse/issues/17391"&gt;#17391&lt;/a&gt;)&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;Internal Changes&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Limit size of presence EDUs to 50 entries. (&lt;a href="https://github.com/element-hq/synapse/issues/17371"&gt;#17371&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;Fix building debian package for debian sid. (&lt;a href="https://github.com/element-hq/synapse/issues/17389"&gt;#17389&lt;/a&gt;)&lt;/li&gt;
&lt;/ul&gt;
&lt;h1&gt;Synapse 1.110.0rc2 (2024-06-26)&lt;/h1&gt;
&lt;h3&gt;Internal Changes&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Fix uploading packages to PyPi. (&lt;a href="https://github.com/element-hq/synapse/issues/17363"&gt;#17363&lt;/a&gt;)&lt;/li&gt;
&lt;/ul&gt;
&lt;h1&gt;Synapse 1.110.0rc1 (2024-06-26)&lt;/h1&gt;
&lt;h3&gt;Features&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Add initial implementation of an experimental &lt;a href="https://github.com/matrix-org/matrix-spec-proposals/pull/3575"&gt;MSC3575&lt;/a&gt; Sliding Sync &lt;code&gt;/sync&lt;/code&gt; endpoint. (&lt;a href="https://github.com/element-hq/synapse/issues/17187"&gt;#17187&lt;/a&gt;, &lt;a href="https://github.com/element-hq/synapse/issues/17301"&gt;#17301&lt;/a&gt;)&lt;ul&gt;
&lt;li&gt;Native sliding sync support is coming, but is not yet ready for usage outside of initial client development and testing. Expect to see much more on this feature in the next few Synapse releases.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Add experimental support for &lt;a href="https://github.com/matrix-org/matrix-spec-proposals/pull/3823"&gt;MSC3823&lt;/a&gt; - Account suspension. (&lt;a href="https://github.com/element-hq/synapse/issues/17255"&gt;#17255&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;Improve ratelimiting in Synapse. (&lt;a href="https://github.com/element-hq/synapse/issues/17256"&gt;#17256&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;Add support for the unstable &lt;a href="https://github.com/matrix-org/matrix-spec-proposals/pull/4151"&gt;MSC4151&lt;/a&gt; report room API. (&lt;a href="https://github.com/element-hq/synapse/issues/17270"&gt;#17270&lt;/a&gt;, &lt;a href="https://github.com/element-hq/synapse/issues/17296"&gt;#17296&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;Filter for public and empty rooms added to Admin-API &lt;a href="https://element-hq.github.io/synapse/latest/admin_api/rooms.html#list-room-api"&gt;List Room API&lt;/a&gt;. (&lt;a href="https://github.com/element-hq/synapse/issues/17276"&gt;#17276&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;Add &lt;code&gt;is_dm&lt;/code&gt; filtering to experimental &lt;a href="https://github.com/matrix-org/matrix-spec-proposals/pull/3575"&gt;MSC3575&lt;/a&gt; Sliding Sync &lt;code&gt;/sync&lt;/code&gt; endpoint. (&lt;a href="https://github.com/element-hq/synapse/issues/17277"&gt;#17277&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;Add &lt;code&gt;is_encrypted&lt;/code&gt; filtering to experimental &lt;a href="https://github.com/matrix-org/matrix-spec-proposals/pull/3575"&gt;MSC3575&lt;/a&gt; Sliding Sync &lt;code&gt;/sync&lt;/code&gt; endpoint. (&lt;a href="https://github.com/element-hq/synapse/issues/17281"&gt;#17281&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;Include user membership in events served to clients, per &lt;a href="https://github.com/matrix-org/matrix-spec-proposals/pull/4115"&gt;MSC4115&lt;/a&gt;. (&lt;a href="https://github.com/element-hq/synapse/issues/17282"&gt;#17282&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;Do not require user-interactive authentication for uploading cross-signing keys for the first time, per &lt;a href="https://github.com/matrix-org/matrix-spec-proposals/pull/3967"&gt;MSC3967&lt;/a&gt;. (&lt;a href="https://github.com/element-hq/synapse/issues/17284"&gt;#17284&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;Add &lt;code&gt;stream_ordering&lt;/code&gt; sort to experimental &lt;a href="https://github.com/matrix-org/matrix-spec-proposals/pull/3575"&gt;MSC3575&lt;/a&gt; Sliding Sync &lt;code&gt;/sync&lt;/code&gt; endpoint. (&lt;a href="https://github.com/element-hq/synapse/issues/17293"&gt;#17293&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;&lt;code&gt;register_new_matrix_user&lt;/code&gt; now supports a --password-file flag, which
  is useful for scripting. (&lt;a href="https://github.com/element-hq/synapse/issues/17294"&gt;#17294&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;&lt;code&gt;register_new_matrix_user&lt;/code&gt; now supports a --exists-ok flag to allow registration of users that already exist in the database.
  This is useful for scripts that bootstrap user accounts with initial passwords. (&lt;a href="https://github.com/element-hq/synapse/issues/17304"&gt;#17304&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;Add support for via query parameter from &lt;a href="https://github.com/matrix-org/matrix-spec-proposals/pull/4156"&gt;MSC4156&lt;/a&gt;. (&lt;a href="https://github.com/element-hq/synapse/issues/17322"&gt;#17322&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;Add &lt;code&gt;is_invite&lt;/code&gt; filtering to experimental &lt;a href="https://github.com/matrix-org/matrix-spec-proposals/pull/3575"&gt;MSC3575&lt;/a&gt; Sliding Sync &lt;code&gt;/sync&lt;/code&gt; endpoint. (&lt;a href="https://github.com/element-hq/synapse/issues/17335"&gt;#17335&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;Support &lt;a href="https://github.com/matrix-org/matrix-spec-proposals/blob/rav/authentication-for-media/proposals/3916-authentication-for-media.md"&gt;MSC3916&lt;/a&gt; by adding a federation /download endpoint. (&lt;a href="https://github.com/element-hq/synapse/issues/17350"&gt;#17350&lt;/a&gt;)&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;Bugfixes&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Fix searching for users with their exact localpart whose ID includes a hyphen. (&lt;a href="https://github.com/element-hq/synapse/issues/17254"&gt;#17254&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;Fix wrong retention policy being used when filtering events. (&lt;a href="https://github.com/element-hq/synapse/issues/17272"&gt;#17272&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;Fix bug where OTKs were not always included in &lt;code&gt;/sync&lt;/code&gt; response when using workers. (&lt;a href="https://github.com/element-hq/synapse/issues/17275"&gt;#17275&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;Fix a long-standing bug where an invalid 'from' parameter to &lt;a href="https://spec.matrix.org/v1.10/client-server-api/#get_matrixclientv3notifications"&gt;&lt;code&gt;/notifications&lt;/code&gt;&lt;/a&gt; would result in an Internal Server Error. (&lt;a href="https://github.com/element-hq/synapse/issues/17283"&gt;#17283&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;Fix edge case in &lt;code&gt;/sync&lt;/code&gt; returning the wrong the state when using sharded event persisters. (&lt;a href="https://github.com/element-hq/synapse/issues/17295"&gt;#17295&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;Fix email notification subject when invited to a space. (&lt;a href="https://github.com/element-hq/synapse/issues/17336"&gt;#17336&lt;/a&gt;)&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;Improved Documentation&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Add missing quotes for example for &lt;code&gt;exclude_rooms_from_sync&lt;/code&gt;. (&lt;a href="https://github.com/element-hq/synapse/issues/17308"&gt;#17308&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;Update header in the README to visually fix the the auto-generated table of contents. (&lt;a href="https://github.com/element-hq/synapse/issues/17329"&gt;#17329&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;Fix stale references to the Foundation's Security Disclosure Policy. (&lt;a href="https://github.com/element-hq/synapse/issues/17341"&gt;#17341&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;Add default values for &lt;code&gt;rc_invites.per_issuer&lt;/code&gt; to docs. (&lt;a href="https://github.com/element-hq/synapse/issues/17347"&gt;#17347&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;Fix an error in the docs for &lt;code&gt;search_all_users&lt;/code&gt; parameter under &lt;code&gt;user_directory&lt;/code&gt;. (&lt;a href="https://github.com/element-hq/synapse/issues/17348"&gt;#17348&lt;/a&gt;)&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;Internal Changes&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Remove unused &lt;code&gt;expire_access_token&lt;/code&gt; option in the Synapse Docker config file. Contributed by @AaronDewes. (&lt;a href="https://github.com/element-hq/synapse/issues/17198"&gt;#17198&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;Use fully-qualified &lt;code&gt;PersistedEventPosition&lt;/code&gt; when returning &lt;code&gt;RoomsForUser&lt;/code&gt; to facilitate proper comparisons and &lt;code&gt;RoomStreamToken&lt;/code&gt; generation. (&lt;a href="https://github.com/element-hq/synapse/issues/17265"&gt;#17265&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;Add debug logging for when room keys are uploaded, including whether they are replacing other room keys. (&lt;a href="https://github.com/element-hq/synapse/issues/17266"&gt;#17266&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;Handle OTK uploads off master. (&lt;a href="https://github.com/element-hq/synapse/issues/17271"&gt;#17271&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;Don't try and resync devices for remote users whose servers are marked as down. (&lt;a href="https://github.com/element-hq/synapse/issues/17273"&gt;#17273&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;Re-organize Pydantic models and types used in handlers. (&lt;a href="https://github.com/element-hq/synapse/issues/17279"&gt;#17279&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;Expose the worker instance that persisted the event on &lt;code&gt;event.internal_metadata.instance_name&lt;/code&gt;. (&lt;a href="https://github.com/element-hq/synapse/issues/17300"&gt;#17300&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;Update the README with Element branding, improve headers and fix the #synapse:matrix.org support room link rendering. (&lt;a href="https://github.com/element-hq/synapse/issues/17324"&gt;#17324&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;Change path of the experimental &lt;a href="https://github.com/matrix-org/matrix-spec-proposals/pull/3575"&gt;MSC3575&lt;/a&gt; Sliding Sync implementation to &lt;code&gt;/org.matrix.simplified_msc3575/sync&lt;/code&gt; since our simplified API is slightly incompatible with what's in the current MSC. (&lt;a href="https://github.com/element-hq/synapse/issues/17331"&gt;#17331&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;Handle device lists notifications for large accounts more efficiently in worker mode. (&lt;a href="https://github.com/element-hq/synapse/issues/17333"&gt;#17333&lt;/a&gt;, &lt;a href="https://github.com/element-hq/synapse/issues/17358"&gt;#17358&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;Do not block event sending/receiving while calculating large event auth chains. (&lt;a href="https://github.com/element-hq/synapse/issues/17338"&gt;#17338&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;Tidy up &lt;code&gt;parse_integer&lt;/code&gt; docs and call sites to reflect the fact that they require non-negative integers by default, and bring &lt;code&gt;parse_integer_from_args&lt;/code&gt; default in alignment. Contributed by Denis Kasak (@dkasak). (&lt;a href="https://github.com/element-hq/synapse/issues/17339"&gt;#17339&lt;/a&gt;)&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;Updates to locked dependencies&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Bump authlib from 1.3.0 to 1.3.1. (&lt;a href="https://github.com/element-hq/synapse/issues/17343"&gt;#17343&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;Bump dawidd6/action-download-artifact from 3.1.4 to 5. (&lt;a href="https://github.com/element-hq/synapse/issues/17289"&gt;#17289&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;Bump dawidd6/action-download-artifact from 5 to 6. (&lt;a href="https://github.com/element-hq/synapse/issues/17313"&gt;#17313&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;Bump docker/build-push-action from 5 to 6. (&lt;a href="https://github.com/element-hq/synapse/issues/17312"&gt;#17312&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;Bump jinja2 from 3.1.3 to 3.1.4. (&lt;a href="https://github.com/element-hq/synapse/issues/17287"&gt;#17287&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;Bump lazy_static from 1.4.0 to 1.5.0. (&lt;a href="https://github.com/element-hq/synapse/issues/17355"&gt;#17355&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;Bump msgpack from 1.0.7 to 1.0.8. (&lt;a href="https://github.com/element-hq/synapse/issues/17317"&gt;#17317&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;Bump netaddr from 1.2.1 to 1.3.0. (&lt;a href="https://github.com/element-hq/synapse/issues/17353"&gt;#17353&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;Bump packaging from 24.0 to 24.1. (&lt;a href="https://github.com/element-hq/synapse/issues/17352"&gt;#17352&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;Bump phonenumbers from 8.13.37 to 8.13.39. (&lt;a href="https://github.com/element-hq/synapse/issues/17315"&gt;#17315&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;Bump regex from 1.10.4 to 1.10.5. (&lt;a href="https://github.com/element-hq/synapse/issues/17290"&gt;#17290&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;Bump requests from 2.31.0 to 2.32.2. (&lt;a href="https://github.com/element-hq/synapse/issues/17345"&gt;#17345&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;Bump sentry-sdk from 2.1.1 to 2.3.1. (&lt;a href="https://github.com/element-hq/synapse/issues/17263"&gt;#17263&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;Bump sentry-sdk from 2.3.1 to 2.6.0. (&lt;a href="https://github.com/element-hq/synapse/issues/17351"&gt;#17351&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;Bump tornado from 6.4 to 6.4.1. (&lt;a href="https://github.com/element-hq/synapse/issues/17344"&gt;#17344&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;Bump mypy from 1.8.0 to 1.9.0. (&lt;a href="https://github.com/element-hq/synapse/issues/17297"&gt;#17297&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;Bump types-jsonschema from 4.21.0.20240311 to 4.22.0.20240610. (&lt;a href="https://github.com/element-hq/synapse/issues/17288"&gt;#17288&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;Bump types-netaddr from 1.2.0.20240219 to 1.3.0.20240530. (&lt;a href="https://github.com/element-hq/synapse/issues/17314"&gt;#17314&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;Bump types-pillow from 10.2.0.20240423 to 10.2.0.20240520. (&lt;a href="https://github.com/element-hq/synapse/issues/17285"&gt;#17285&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;Bump types-pyyaml from 6.0.12.12 to 6.0.12.20240311. (&lt;a href="https://github.com/element-hq/synapse/issues/17316"&gt;#17316&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;Bump typing-extensions from 4.11.0 to 4.12.2. (&lt;a href="https://github.com/element-hq/synapse/issues/17354"&gt;#17354&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;Bump urllib3 from 2.0.7 to 2.2.2. (&lt;a href="https://github.com/element-hq/synapse/issues/17346"&gt;#17346&lt;/a&gt;)&lt;/li&gt;
&lt;/ul&gt;</content>
    <link href="https://github.com/element-hq/synapse/releases/tag/v1.110.0" rel="alternate"/>
  </entry>
  <entry>
    <id>https://github.com/element-hq/synapse/releases/tag/v1.111.0</id>
    <title>New release for Synapse: v1.111.0</title>
    <updated>2024-07-16T08:26:50-04:00</updated>
    <author>
      <name>element-hq/synapse</name>
    </author>
    <content>&lt;h1&gt;Synapse 1.111.0 (2024-07-16)&lt;/h1&gt;
&lt;p&gt;No significant changes since 1.111.0rc2.&lt;/p&gt;
&lt;h1&gt;Synapse 1.111.0rc2 (2024-07-10)&lt;/h1&gt;
&lt;h3&gt;Bugfixes&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Fix bug where using &lt;code&gt;synapse.app.media_repository&lt;/code&gt; worker configuration would break the new media endpoints. (&lt;a href="https://github.com/element-hq/synapse/issues/17420"&gt;#17420&lt;/a&gt;)&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;Improved Documentation&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Document the new federation media worker endpoints in the &lt;a href="https://element-hq.github.io/synapse/v1.111/upgrade.html"&gt;upgrade notes&lt;/a&gt; and &lt;a href="https://element-hq.github.io/synapse/v1.111/workers.html"&gt;worker docs&lt;/a&gt;. (&lt;a href="https://github.com/element-hq/synapse/issues/17421"&gt;#17421&lt;/a&gt;)&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;Internal Changes&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Route authenticated federation media requests to media repository workers in Complement tests. (&lt;a href="https://github.com/element-hq/synapse/issues/17422"&gt;#17422&lt;/a&gt;)&lt;/li&gt;
&lt;/ul&gt;
&lt;h1&gt;Synapse 1.111.0rc1 (2024-07-09)&lt;/h1&gt;
&lt;h3&gt;Features&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Add &lt;code&gt;rooms&lt;/code&gt; data to experimental &lt;a href="https://github.com/matrix-org/matrix-spec-proposals/pull/3575"&gt;MSC3575&lt;/a&gt; Sliding Sync &lt;code&gt;/sync&lt;/code&gt; endpoint. (&lt;a href="https://github.com/element-hq/synapse/issues/17320"&gt;#17320&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;Add &lt;code&gt;room_types&lt;/code&gt;/&lt;code&gt;not_room_types&lt;/code&gt; filtering to experimental &lt;a href="https://github.com/matrix-org/matrix-spec-proposals/pull/3575"&gt;MSC3575&lt;/a&gt; Sliding Sync &lt;code&gt;/sync&lt;/code&gt; endpoint. (&lt;a href="https://github.com/element-hq/synapse/issues/17337"&gt;#17337&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;Return "required state" in experimental &lt;a href="https://github.com/matrix-org/matrix-spec-proposals/pull/3575"&gt;MSC3575&lt;/a&gt; Sliding Sync &lt;code&gt;/sync&lt;/code&gt; endpoint. (&lt;a href="https://github.com/element-hq/synapse/issues/17342"&gt;#17342&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;Support &lt;a href="https://github.com/matrix-org/matrix-spec-proposals/blob/main/proposals/3916-authentication-for-media.md"&gt;MSC3916&lt;/a&gt; by adding &lt;a href="https://spec.matrix.org/v1.11/client-server-api/#get_matrixclientv1mediadownloadservernamemediaid"&gt;&lt;code&gt;_matrix/client/v1/media/download&lt;/code&gt;&lt;/a&gt; endpoint. (&lt;a href="https://github.com/element-hq/synapse/issues/17365"&gt;#17365&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;Support &lt;a href="https://github.com/matrix-org/matrix-spec-proposals/blob/rav/authentication-for-media/proposals/3916-authentication-for-media.md"&gt;MSC3916&lt;/a&gt;
  by adding &lt;a href="https://spec.matrix.org/v1.11/client-server-api/#get_matrixclientv1mediathumbnailservernamemediaid"&gt;&lt;code&gt;_matrix/client/v1/media/thumbnail&lt;/code&gt;&lt;/a&gt;, &lt;a href="https://spec.matrix.org/v1.11/server-server-api/#get_matrixfederationv1mediathumbnailmediaid"&gt;&lt;code&gt;_matrix/federation/v1/media/thumbnail&lt;/code&gt;&lt;/a&gt; endpoints and stabilizing the
  remaining &lt;a href="https://spec.matrix.org/v1.11/client-server-api/#get_matrixclientv1mediaconfig"&gt;&lt;code&gt;_matrix/client/v1/media&lt;/code&gt;&lt;/a&gt; endpoints. (&lt;a href="https://github.com/element-hq/synapse/issues/17388"&gt;#17388&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;Add &lt;code&gt;rooms.bump_stamp&lt;/code&gt; for easier client-side sorting in experimental &lt;a href="https://github.com/matrix-org/matrix-spec-proposals/pull/3575"&gt;MSC3575&lt;/a&gt; Sliding Sync &lt;code&gt;/sync&lt;/code&gt; endpoint. (&lt;a href="https://github.com/element-hq/synapse/issues/17395"&gt;#17395&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;Forget all of a user's rooms upon deactivation, preventing local room purges from being blocked on deactivated users. (&lt;a href="https://github.com/element-hq/synapse/issues/17400"&gt;#17400&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;Declare support for &lt;a href="https://matrix.org/blog/2024/06/20/matrix-v1.11-release/"&gt;Matrix 1.11&lt;/a&gt;. (&lt;a href="https://github.com/element-hq/synapse/issues/17403"&gt;#17403&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/matrix-org/matrix-spec-proposals/pull/3861"&gt;MSC3861&lt;/a&gt;: allow overriding the introspection endpoint. (&lt;a href="https://github.com/element-hq/synapse/issues/17406"&gt;#17406&lt;/a&gt;)&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;Bugfixes&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Fix rare race which caused no new to-device messages to be received from remote server. (&lt;a href="https://github.com/element-hq/synapse/issues/17362"&gt;#17362&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;Fix bug in experimental &lt;a href="https://github.com/matrix-org/matrix-spec-proposals/pull/3575"&gt;MSC3575&lt;/a&gt; Sliding Sync &lt;code&gt;/sync&lt;/code&gt; endpoint when using an old database. (&lt;a href="https://github.com/element-hq/synapse/issues/17398"&gt;#17398&lt;/a&gt;)&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;Improved Documentation&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Clarify that &lt;code&gt;url_preview_url_blacklist&lt;/code&gt; is a usability feature. (&lt;a href="https://github.com/element-hq/synapse/issues/17356"&gt;#17356&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;Fix broken links in README. (&lt;a href="https://github.com/element-hq/synapse/issues/17379"&gt;#17379&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;Clarify that changelog content &lt;em&gt;and file extension&lt;/em&gt; need to match in order for entries to merge. (&lt;a href="https://github.com/element-hq/synapse/issues/17399"&gt;#17399&lt;/a&gt;)&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;Internal Changes&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Make the release script create a release branch for Complement as well. (&lt;a href="https://github.com/element-hq/synapse/issues/17318"&gt;#17318&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;Fix uploading packages to PyPi. (&lt;a href="https://github.com/element-hq/synapse/issues/17363"&gt;#17363&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;Add CI check for the README. (&lt;a href="https://github.com/element-hq/synapse/issues/17367"&gt;#17367&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;Fix linting errors from new &lt;code&gt;ruff&lt;/code&gt; version. (&lt;a href="https://github.com/element-hq/synapse/issues/17381"&gt;#17381&lt;/a&gt;, &lt;a href="https://github.com/element-hq/synapse/issues/17411"&gt;#17411&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;Fix building debian packages on non-clean checkouts. (&lt;a href="https://github.com/element-hq/synapse/issues/17390"&gt;#17390&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;Finish up work to allow per-user feature flags. (&lt;a href="https://github.com/element-hq/synapse/issues/17392"&gt;#17392&lt;/a&gt;, &lt;a href="https://github.com/element-hq/synapse/issues/17410"&gt;#17410&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;Allow enabling sliding sync per-user. (&lt;a href="https://github.com/element-hq/synapse/issues/17393"&gt;#17393&lt;/a&gt;)&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;Updates to locked dependencies&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Bump certifi from 2023.7.22 to 2024.7.4. (&lt;a href="https://github.com/element-hq/synapse/issues/17404"&gt;#17404&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;Bump cryptography from 42.0.7 to 42.0.8. (&lt;a href="https://github.com/element-hq/synapse/issues/17382"&gt;#17382&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;Bump ijson from 3.2.3 to 3.3.0. (&lt;a href="https://github.com/element-hq/synapse/issues/17413"&gt;#17413&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;Bump log from 0.4.21 to 0.4.22. (&lt;a href="https://github.com/element-hq/synapse/issues/17384"&gt;#17384&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;Bump mypy-zope from 1.0.4 to 1.0.5. (&lt;a href="https://github.com/element-hq/synapse/issues/17414"&gt;#17414&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;Bump pillow from 10.3.0 to 10.4.0. (&lt;a href="https://github.com/element-hq/synapse/issues/17412"&gt;#17412&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;Bump pydantic from 2.7.1 to 2.8.2. (&lt;a href="https://github.com/element-hq/synapse/issues/17415"&gt;#17415&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;Bump ruff from 0.3.7 to 0.5.0. (&lt;a href="https://github.com/element-hq/synapse/issues/17381"&gt;#17381&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;Bump serde from 1.0.203 to 1.0.204. (&lt;a href="https://github.com/element-hq/synapse/issues/17409"&gt;#17409&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;Bump serde_json from 1.0.117 to 1.0.120. (&lt;a href="https://github.com/element-hq/synapse/issues/17385"&gt;#17385&lt;/a&gt;, &lt;a href="https://github.com/element-hq/synapse/issues/17408"&gt;#17408&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;Bump types-setuptools from 69.5.0.20240423 to 70.1.0.20240627. (&lt;a href="https://github.com/element-hq/synapse/issues/17380"&gt;#17380&lt;/a&gt;)&lt;/li&gt;
&lt;/ul&gt;</content>
    <link href="https://github.com/element-hq/synapse/releases/tag/v1.111.0" rel="alternate"/>
  </entry>
  <entry>
    <id>https://github.com/element-hq/synapse/releases/tag/v1.111.1</id>
    <title>New release for Synapse: v1.111.1</title>
    <updated>2024-07-30T11:59:45-04:00</updated>
    <author>
      <name>element-hq/synapse</name>
    </author>
    <content>&lt;h1&gt;Synapse 1.111.1 (2024-07-30)&lt;/h1&gt;
&lt;p&gt;This security release is to update our locked dependency on Twisted to 24.7.0rc1, which includes a security fix for &lt;a href="https://github.com/twisted/twisted/security/advisories/GHSA-c8m8-j448-xjx7"&gt;CVE-2024-41671 / GHSA-c8m8-j448-xjx7: Disordered HTTP pipeline response in twisted.web, again&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;This issue means that, if multiple HTTP requests are pipelined in the same TCP connection, Synapse can send responses to the wrong HTTP request.
If a reverse proxy was configured to use HTTP pipelining, this could result in responses being sent to the wrong user, severely harming confidentiality.&lt;/p&gt;
&lt;p&gt;With that said, despite being a high severity issue, &lt;strong&gt;we consider it unlikely that Synapse installations will be affected&lt;/strong&gt;.
The use of HTTP pipelining in this fashion would cause worse performance for clients (request-response latencies would be increased as users' responses would be artificially blocked behind other users' slow requests). Further, Nginx and Haproxy, two common reverse proxies, do not appear to support configuring their upstreams to use HTTP pipelining and thus would not be affected. For both of these reasons, we consider it unlikely that a Synapse deployment would be set up in such a configuration.&lt;/p&gt;
&lt;p&gt;Despite that, we cannot rule out that some installations may exist with this unusual setup and so we are releasing this security update today.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;pip users:&lt;/strong&gt; Note that by default, upgrading Synapse using pip will not automatically upgrade Twisted. &lt;strong&gt;Please manually install the new version of Twisted&lt;/strong&gt; using &lt;code&gt;pip install Twisted==24.7.0rc1&lt;/code&gt;. Note also that even the &lt;code&gt;--upgrade-strategy=eager&lt;/code&gt; flag to &lt;code&gt;pip install -U matrix-synapse&lt;/code&gt; will not upgrade Twisted to a patched version because it is only a release candidate at this time.&lt;/p&gt;
&lt;h3&gt;Internal Changes&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Upgrade locked dependency on Twisted to 24.7.0rc1. (&lt;a href="https://github.com/element-hq/synapse/issues/17502"&gt;#17502&lt;/a&gt;)&lt;/li&gt;
&lt;/ul&gt;</content>
    <link href="https://github.com/element-hq/synapse/releases/tag/v1.111.1" rel="alternate"/>
  </entry>
  <entry>
    <id>https://github.com/element-hq/synapse/releases/tag/v1.112.0</id>
    <title>New release for Synapse: v1.112.0</title>
    <updated>2024-07-30T13:02:48-04:00</updated>
    <author>
      <name>element-hq/synapse</name>
    </author>
    <content>&lt;h1&gt;Synapse 1.112.0 (2024-07-30)&lt;/h1&gt;
&lt;p&gt;This security release is to update our locked dependency on Twisted to 24.7.0rc1, which includes a security fix for &lt;a href="https://github.com/twisted/twisted/security/advisories/GHSA-c8m8-j448-xjx7"&gt;CVE-2024-41671 / GHSA-c8m8-j448-xjx7: Disordered HTTP pipeline response in twisted.web, again&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Note that this security fix is also available as &lt;strong&gt;Synapse 1.111.1&lt;/strong&gt;, which does not include the rest of the changes in Synapse 1.112.0.&lt;/p&gt;
&lt;p&gt;This issue means that, if multiple HTTP requests are pipelined in the same TCP connection, Synapse can send responses to the wrong HTTP request.
If a reverse proxy was configured to use HTTP pipelining, this could result in responses being sent to the wrong user, severely harming confidentiality.&lt;/p&gt;
&lt;p&gt;With that said, despite being a high severity issue, &lt;strong&gt;we consider it unlikely that Synapse installations will be affected&lt;/strong&gt;.
The use of HTTP pipelining in this fashion would cause worse performance for clients (request-response latencies would be increased as users' responses would be artificially blocked behind other users' slow requests). Further, Nginx and Haproxy, two common reverse proxies, do not appear to support configuring their upstreams to use HTTP pipelining and thus would not be affected. For both of these reasons, we consider it unlikely that a Synapse deployment would be set up in such a configuration.&lt;/p&gt;
&lt;p&gt;Despite that, we cannot rule out that some installations may exist with this unusual setup and so we are releasing this security update today.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;pip users:&lt;/strong&gt; Note that by default, upgrading Synapse using pip will not automatically upgrade Twisted. &lt;strong&gt;Please manually install the new version of Twisted&lt;/strong&gt; using &lt;code&gt;pip install Twisted==24.7.0rc1&lt;/code&gt;. Note also that even the &lt;code&gt;--upgrade-strategy=eager&lt;/code&gt; flag to &lt;code&gt;pip install -U matrix-synapse&lt;/code&gt; will not upgrade Twisted to a patched version because it is only a release candidate at this time.&lt;/p&gt;
&lt;h3&gt;Internal Changes&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Upgrade locked dependency on Twisted to 24.7.0rc1. (&lt;a href="https://github.com/element-hq/synapse/issues/17502"&gt;#17502&lt;/a&gt;)&lt;/li&gt;
&lt;/ul&gt;
&lt;h1&gt;Synapse 1.112.0rc1 (2024-07-23)&lt;/h1&gt;
&lt;p&gt;Please note that this release candidate does not include the security dependency update
included in version 1.111.1 as this version was released before 1.111.1.
The same security fix can be found in the full release of 1.112.0.&lt;/p&gt;
&lt;h3&gt;Features&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Add to-device extension support to experimental &lt;a href="https://github.com/matrix-org/matrix-spec-proposals/pull/3575"&gt;MSC3575&lt;/a&gt; Sliding Sync &lt;code&gt;/sync&lt;/code&gt; endpoint. (&lt;a href="https://github.com/element-hq/synapse/issues/17416"&gt;#17416&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;Populate &lt;code&gt;name&lt;/code&gt;/&lt;code&gt;avatar&lt;/code&gt; fields in experimental &lt;a href="https://github.com/matrix-org/matrix-spec-proposals/pull/3575"&gt;MSC3575&lt;/a&gt; Sliding Sync &lt;code&gt;/sync&lt;/code&gt; endpoint. (&lt;a href="https://github.com/element-hq/synapse/issues/17418"&gt;#17418&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;Populate &lt;code&gt;heroes&lt;/code&gt; and room summary fields (&lt;code&gt;joined_count&lt;/code&gt;, &lt;code&gt;invited_count&lt;/code&gt;) in experimental &lt;a href="https://github.com/matrix-org/matrix-spec-proposals/pull/3575"&gt;MSC3575&lt;/a&gt; Sliding Sync &lt;code&gt;/sync&lt;/code&gt; endpoint. (&lt;a href="https://github.com/element-hq/synapse/issues/17419"&gt;#17419&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;Populate &lt;code&gt;is_dm&lt;/code&gt; room field in experimental &lt;a href="https://github.com/matrix-org/matrix-spec-proposals/pull/3575"&gt;MSC3575&lt;/a&gt; Sliding Sync &lt;code&gt;/sync&lt;/code&gt; endpoint. (&lt;a href="https://github.com/element-hq/synapse/issues/17429"&gt;#17429&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;Add room subscriptions to experimental &lt;a href="https://github.com/matrix-org/matrix-spec-proposals/pull/3575"&gt;MSC3575&lt;/a&gt; Sliding Sync &lt;code&gt;/sync&lt;/code&gt; endpoint. (&lt;a href="https://github.com/element-hq/synapse/issues/17432"&gt;#17432&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;Prepare for authenticated media freeze. (&lt;a href="https://github.com/element-hq/synapse/issues/17433"&gt;#17433&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;Add E2EE extension support to experimental &lt;a href="https://github.com/matrix-org/matrix-spec-proposals/pull/3575"&gt;MSC3575&lt;/a&gt; Sliding Sync &lt;code&gt;/sync&lt;/code&gt; endpoint. (&lt;a href="https://github.com/element-hq/synapse/issues/17454"&gt;#17454&lt;/a&gt;)&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;Bugfixes&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Add configurable option to always include offline users in presence sync results. Contributed by @Michael-Hollister. (&lt;a href="https://github.com/element-hq/synapse/issues/17231"&gt;#17231&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;Fix bug in experimental &lt;a href="https://github.com/matrix-org/matrix-spec-proposals/pull/3575"&gt;MSC3575&lt;/a&gt; Sliding Sync &lt;code&gt;/sync&lt;/code&gt; endpoint when using room type filters and the user has one or more remote invites. (&lt;a href="https://github.com/element-hq/synapse/issues/17434"&gt;#17434&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;Order &lt;code&gt;heroes&lt;/code&gt; by &lt;code&gt;stream_ordering&lt;/code&gt; as the Matrix specification states (applies to &lt;code&gt;/sync&lt;/code&gt;). (&lt;a href="https://github.com/element-hq/synapse/issues/17435"&gt;#17435&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;Fix rare bug where &lt;code&gt;/sync&lt;/code&gt; would break for a user when using workers with multiple stream writers. (&lt;a href="https://github.com/element-hq/synapse/issues/17438"&gt;#17438&lt;/a&gt;)&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;Improved Documentation&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Update the readme image to have a white background, so that it is readable in dark mode. (&lt;a href="https://github.com/element-hq/synapse/issues/17387"&gt;#17387&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;Add Red Hat Enterprise Linux and Rocky Linux 8 and 9 installation instructions. (&lt;a href="https://github.com/element-hq/synapse/issues/17423"&gt;#17423&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;Improve documentation for the &lt;a href="https://element-hq.github.io/synapse/latest/usage/configuration/config_documentation.html#default_power_level_content_override"&gt;&lt;code&gt;default_power_level_content_override&lt;/code&gt;&lt;/a&gt; config option. (&lt;a href="https://github.com/element-hq/synapse/issues/17451"&gt;#17451&lt;/a&gt;)&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;Internal Changes&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Make sure we always use the right logic for enabling the media repo. (&lt;a href="https://github.com/element-hq/synapse/issues/17424"&gt;#17424&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;Fix argument documentation for method &lt;code&gt;RateLimiter.record_action&lt;/code&gt;. (&lt;a href="https://github.com/element-hq/synapse/issues/17426"&gt;#17426&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;Reduce volume of 'Waiting for current token' logs, which were introduced in v1.109.0. (&lt;a href="https://github.com/element-hq/synapse/issues/17428"&gt;#17428&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;Limit concurrent remote downloads to 6 per IP address, and decrement remote downloads without a content-length from the ratelimiter after the download is complete. (&lt;a href="https://github.com/element-hq/synapse/issues/17439"&gt;#17439&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;Remove unnecessary call to resume producing in fake channel. (&lt;a href="https://github.com/element-hq/synapse/issues/17449"&gt;#17449&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;Update experimental &lt;a href="https://github.com/matrix-org/matrix-spec-proposals/pull/3575"&gt;MSC3575&lt;/a&gt; Sliding Sync &lt;code&gt;/sync&lt;/code&gt; endpoint to bump room when it is created. (&lt;a href="https://github.com/element-hq/synapse/issues/17453"&gt;#17453&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;Speed up generating sliding sync responses. (&lt;a href="https://github.com/element-hq/synapse/issues/17458"&gt;#17458&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;Add cache to &lt;code&gt;get_rooms_for_local_user_where_membership_is&lt;/code&gt; to speed up sliding sync. (&lt;a href="https://github.com/element-hq/synapse/issues/17460"&gt;#17460&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;Speed up fetching room keys from backup. (&lt;a href="https://github.com/element-hq/synapse/issues/17461"&gt;#17461&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;Speed up sorting of the room list in sliding sync. (&lt;a href="https://github.com/element-hq/synapse/issues/17468"&gt;#17468&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;Implement handling of &lt;code&gt;$ME&lt;/code&gt; as a state key in sliding sync. (&lt;a href="https://github.com/element-hq/synapse/issues/17469"&gt;#17469&lt;/a&gt;)&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;Updates to locked dependencies&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Bump bytes from 1.6.0 to 1.6.1. (&lt;a href="https://github.com/element-hq/synapse/issues/17441"&gt;#17441&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;Bump hiredis from 2.3.2 to 3.0.0. (&lt;a href="https://github.com/element-hq/synapse/issues/17464"&gt;#17464&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;Bump jsonschema from 4.22.0 to 4.23.0. (&lt;a href="https://github.com/element-hq/synapse/issues/17444"&gt;#17444&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;Bump matrix-org/done-action from 2 to 3. (&lt;a href="https://github.com/element-hq/synapse/issues/17440"&gt;#17440&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;Bump mypy from 1.9.0 to 1.10.1. (&lt;a href="https://github.com/element-hq/synapse/issues/17445"&gt;#17445&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;Bump pyopenssl from 24.1.0 to 24.2.1. (&lt;a href="https://github.com/element-hq/synapse/issues/17465"&gt;#17465&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;Bump ruff from 0.5.0 to 0.5.4. (&lt;a href="https://github.com/element-hq/synapse/issues/17466"&gt;#17466&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;Bump sentry-sdk from 2.6.0 to 2.8.0. (&lt;a href="https://github.com/element-hq/synapse/issues/17456"&gt;#17456&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;Bump sentry-sdk from 2.8.0 to 2.10.0. (&lt;a href="https://github.com/element-hq/synapse/issues/17467"&gt;#17467&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;Bump setuptools from 67.6.0 to 70.0.0. (&lt;a href="https://github.com/element-hq/synapse/issues/17448"&gt;#17448&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;Bump twine from 5.1.0 to 5.1.1. (&lt;a href="https://github.com/element-hq/synapse/issues/17443"&gt;#17443&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;Bump types-jsonschema from 4.22.0.20240610 to 4.23.0.20240712. (&lt;a href="https://github.com/element-hq/synapse/issues/17446"&gt;#17446&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;Bump ulid from 1.1.2 to 1.1.3. (&lt;a href="https://github.com/element-hq/synapse/issues/17442"&gt;#17442&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;Bump zipp from 3.15.0 to 3.19.1. (&lt;a href="https://github.com/element-hq/synapse/issues/17427"&gt;#17427&lt;/a&gt;)&lt;/li&gt;
&lt;/ul&gt;</content>
    <link href="https://github.com/element-hq/synapse/releases/tag/v1.112.0" rel="alternate"/>
  </entry>
</feed>
